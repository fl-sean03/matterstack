from matterstack.core.operators import register_simulator, get_operator

def test_operator_registration():
    @register_simulator(name="dummy_sim", tier="cheap")
    def dummy(candidate, env, ctx):
        return {"metric": 1.0}

    op = get_operator("dummy_sim")
    assert op.name == "dummy_sim"
    assert op.tier == "cheap"
    assert op.kind == "simulator"
    assert op.fn({}, None, None)["metric"] == 1.0